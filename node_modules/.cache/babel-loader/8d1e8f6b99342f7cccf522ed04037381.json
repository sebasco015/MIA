{"ast":null,"code":"var _jsxFileName = \"F:\\\\MIA\\\\proyecto-mia\\\\MIA\\\\src\\\\componentes\\\\ContenidoCambiarClave.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport CheckButton from \"react-validation/build/button\";\nimport Input from \"react-validation/build/input\";\nimport axios from 'axios';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport env from '../env.json';\nimport './contenidocambiarclave.css';\nimport { clearUser } from \"../redux/slice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ContenidoCambiarClave = () => {\n  _s();\n\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const [id, setId] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [confNewPassword, setConfNewPassword] = useState('');\n  useEffect(() => {\n    setId(user.id);\n  }, [user]);\n\n  const handleSubmit = async e => {\n    try {\n      e.preventDefault();\n\n      if (newPassword !== '' && currentPassword !== '' && confNewPassword !== '') {\n        if (newPassword === currentPassword || confNewPassword === currentPassword) alert('La nueva contraseña no puede ser igual a la anterior');else if (newPassword !== confNewPassword) alert('Las contraseñas no coinciden');else {\n          const data = {\n            currentPassword,\n            newPassword,\n            confirmPassword: confNewPassword\n          };\n          await axios.put(`${env.host}/usuarios/actualizar/contrasena/${id}`, data);\n          dispatch(clearUser());\n          alert('Contraseña actualizada');\n          window.location.reload();\n        }\n      } else alert('Todos los campos son requeridos');\n    } catch (e) {\n      const eJson = e.toJSON();\n      if (eJson.status === 400) alert('La contraseña actual no es valida');else alert('Datos incorrectos');\n    }\n  };\n\n  const required = value => {\n    if (!value) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        id: \"login_alerterror\",\n        children: \"\\xA1Este campo es obligatorio!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"clave_divruta\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"clave_iconos\",\n        src: \"/img/icono_inicio.png\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        id: \"clave_linkinicio\",\n        to: \"/Inicio\",\n        children: \"Inicio/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"clave_iconos\",\n        src: \"/img/icono_administrador.png\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        id: \"clave_rutas\",\n        children: \"Administrador/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        id: \"Clave_rutas\",\n        children: \"Cambiar Clave\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      id: \"clave_form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"clave_divinfomacion\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          id: \"clave_inputs\",\n          children: \"Contrase\\xF1a Actual:*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          autoComplete: \"true\",\n          type: \"text\",\n          className: \"form-control\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"Clave Actual\",\n          onChange: e => setCurrentPassword(e.target.value),\n          value: currentPassword,\n          validations: [required]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"clave_divinfomacion\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          id: \"clave_inputs\",\n          children: \"Contrase\\xF1a Nueva:*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          autoComplete: \"true\",\n          type: \"text\",\n          className: \"form-control\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"Clave Nueva\",\n          onChange: e => setNewPassword(e.target.value),\n          value: newPassword,\n          validations: [required]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"clave_divinfomacion\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          id: \"clave_inputs\",\n          children: \"Confirmar Contrase\\xF1a Nueva:*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          autoComplete: \"true\",\n          type: \"text\",\n          className: \"form-control\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"Confirmar Clave Nueva\",\n          onChange: e => setConfNewPassword(e.target.value),\n          value: confNewPassword,\n          validations: [required]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"busc\",\n        children: /*#__PURE__*/_jsxDEV(CheckButton, {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          \"data-toggle\": \"modal\",\n          \"data-target\": \"#exampleModal\",\n          children: \"Actualizar Contrase\\xF1a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContenidoCambiarClave, \"Plo9vdrPCdUl9zmz+pxYlCnhdLU=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = ContenidoCambiarClave;\nexport default ContenidoCambiarClave;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContenidoCambiarClave\");","map":{"version":3,"names":["React","useEffect","useState","Link","Form","CheckButton","Input","axios","useDispatch","useSelector","env","clearUser","ContenidoCambiarClave","user","state","dispatch","id","setId","newPassword","setNewPassword","currentPassword","setCurrentPassword","confNewPassword","setConfNewPassword","handleSubmit","e","preventDefault","alert","data","confirmPassword","put","host","window","location","reload","eJson","toJSON","status","required","value","target"],"sources":["F:/MIA/proyecto-mia/MIA/src/componentes/ContenidoCambiarClave.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Form from \"react-validation/build/form\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport Input from \"react-validation/build/input\";\r\nimport axios from 'axios';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport env from '../env.json';\r\n\r\nimport './contenidocambiarclave.css'\r\nimport {clearUser} from \"../redux/slice\";\r\n\r\nconst ContenidoCambiarClave = () => {\r\n  const user = useSelector(state => state.user);\r\n  const dispatch = useDispatch();\r\n\r\n  const [id, setId] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [confNewPassword, setConfNewPassword] = useState('');\r\n\r\n  useEffect(() => {\r\n    setId(user.id);\r\n  }, [user]);\r\n\r\n  const handleSubmit = async e => {\r\n    try {\r\n      e.preventDefault();\r\n      if(newPassword !== '' && currentPassword !== '' && confNewPassword !== ''){\r\n        if(newPassword === currentPassword || confNewPassword === currentPassword)\r\n          alert('La nueva contraseña no puede ser igual a la anterior');\r\n\r\n        else if(newPassword !== confNewPassword) alert('Las contraseñas no coinciden');\r\n\r\n        else {\r\n          const data = { currentPassword, newPassword, confirmPassword: confNewPassword };\r\n          await axios.put(`${env.host}/usuarios/actualizar/contrasena/${id}`, data);\r\n          dispatch(clearUser());\r\n          alert('Contraseña actualizada');\r\n          window.location.reload();\r\n        }\r\n      } else alert('Todos los campos son requeridos');\r\n    } catch(e) {\r\n      const eJson = e.toJSON();\r\n      if(eJson.status === 400) alert('La contraseña actual no es valida');\r\n      else alert('Datos incorrectos');\r\n    }\r\n  };\r\n\r\n  const required = value => {\r\n    if (!value) {\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\" id=\"login_alerterror\">\r\n          ¡Este campo es obligatorio!\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"container\">\r\n      <div id='clave_divruta'>\r\n        <img id=\"clave_iconos\" src='/img/icono_inicio.png' alt='' />\r\n        <Link id=\"clave_linkinicio\" to=\"/Inicio\">Inicio/</Link>\r\n        <img id=\"clave_iconos\" src='/img/icono_administrador.png' alt='' />\r\n        <label id='clave_rutas'>Administrador/</label>\r\n        <label id='Clave_rutas'>Cambiar Clave</label>\r\n      </div>\r\n      <Form onSubmit={ handleSubmit } id=\"clave_form\">\r\n        <div id=\"clave_divinfomacion\">\r\n          <label htmlFor=\"exampleInputEmail1\" id=\"clave_inputs\">Contraseña Actual:*</label>\r\n          <Input\r\n            autoComplete=\"true\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            aria-describedby=\"emailHelp\"\r\n            placeholder=\"Clave Actual\"\r\n            onChange={ e => setCurrentPassword(e.target.value) }\r\n            value={ currentPassword }\r\n            validations={[required]}\r\n          />\r\n        </div>\r\n        <div id=\"clave_divinfomacion\">\r\n          <label htmlFor=\"exampleInputEmail1\" id=\"clave_inputs\">Contraseña Nueva:*</label>\r\n          <Input\r\n            autoComplete=\"true\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            aria-describedby=\"emailHelp\"\r\n            placeholder=\"Clave Nueva\"\r\n            onChange={ e => setNewPassword(e.target.value) }\r\n            value={ newPassword }\r\n            validations={[required]}\r\n          />\r\n        </div>\r\n        <div id=\"clave_divinfomacion\">\r\n          <label htmlFor=\"exampleInputEmail1\" id=\"clave_inputs\">Confirmar Contraseña Nueva:*</label>\r\n          <Input\r\n            autoComplete=\"true\"\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            aria-describedby=\"emailHelp\"\r\n            placeholder=\"Confirmar Clave Nueva\"\r\n            onChange={ e => setConfNewPassword(e.target.value) }\r\n            value={ confNewPassword }\r\n            validations={[required]}\r\n          />\r\n        </div>\r\n\r\n        <div id=\"busc\">\r\n          <CheckButton\r\n            type=\"submit\"\r\n            className=\"btn btn-primary\"\r\n            data-toggle=\"modal\"\r\n            data-target=\"#exampleModal\"\r\n          >Actualizar Contraseña</CheckButton>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ContenidoCambiarClave;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}